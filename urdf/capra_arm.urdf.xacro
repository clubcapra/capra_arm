<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">

  <xacro:include filename="$(find robotiq_2f_140_gripper_visualization)/urdf/robotiq_arg2f_140_model_macro.xacro" />

   <xacro:macro name="capra_arm" params="parent">

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxx Base du bras xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
     <joint name="arm_attach" type="fixed">
       <parent link="${parent}"/>
       <origin xyz="0 0 0" rpy="0 0 0"/>
       <child link="CA_01"/>
       <dynamics damping="0.1"/>
       <limit effort="10000.0" lower="-1.49" upper="1.49" velocity="1"/>
    <!-- Utiliser l'origine specifiee dans le xacro parent -->
       <!-- <xacro:insert_block name="origin"/> -->
     </joint>

     <link name="CA_01">
       <visual>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-01.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="1.5708 0 0"/>
         <material name="arm_color">
           <color rgba="0.99 0.3 0.3 1"/>
         </material>
       </visual>
       <collision>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-01.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="1.5708 0 0"/>
       </collision>
       <inertial>
         <mass value="0.1" />
         <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
         <inertia ixx = "0.00001" ixy = "0.0" ixz = "0.0"
                  iyy= "0.00001" iyz = "0.0"
                  izz = "0.00001" />
       </inertial>
     </link>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxx 1er Axe xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
     <joint name="axis0" type="revolute">
       <parent link="CA_01"/>
       <child link="CA_02"/>
       <dynamics damping="0.1"/>
       <limit effort="10000.0" lower="-1.57" upper="1.5" velocity="0.57"/>
       <axis xyz="0 0 1" />
       <origin xyz="0 0 0.0508" rpy="0 0 3.1416" />
       <axis xyz="0 1 0" />
     </joint>

     <link name="CA_02">
       <visual>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-02.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="1.5708 0 0"/>
         <material name="arm_color">
           <color rgba="0.99 0.3 0.3 1"/>
         </material>
       </visual>
       <collision>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-02.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="1.5708 0 0"/>
       </collision>
       <inertial>
         <mass value="0.1" />
         <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
         <inertia ixx = "0.00001" ixy = "0.0" ixz = "0.0"
                  iyy= "0.00001" iyz = "0.0"
                  izz = "0.00001" />
       </inertial>
     </link>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxx 2e Axe xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
     <joint name="axis1" type="revolute">
       <parent link="CA_02"/>
       <child link="CA_03"/>
       <dynamics damping="0.1"/>
       <limit effort="10000.0" lower="-1.57" upper="1.5" velocity="0.57"/>
       <axis xyz="0 0 1" />
       <origin xyz="0 0 0.0889" rpy="1.5708 0 0" />
       <axis xyz="0 1 0" />
     </joint>

     <link name="CA_03">
       <visual>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-03.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="0 0 0"/>
         <material name="arm_color">
           <color rgba="0.99 0.3 0.3 1"/>
         </material>
       </visual>
       <collision>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-03.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="0 0 0"/>
       </collision>
       <inertial>
         <mass value="0.1" />
         <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
         <inertia ixx = "0.00001" ixy = "0.0" ixz = "0.0"
                  iyy= "0.00001" iyz = "0.0"
                  izz = "0.00001" />
       </inertial>
     </link>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxx 3e Axe xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
     <joint name="axis2" type="revolute">
       <parent link="CA_03"/>
       <child link="CA_04"/>
       <dynamics damping="0.1"/>
       <limit effort="10000.0" lower="-1.57" upper="1.5" velocity="0.57"/>
       <axis xyz="0 0 1" />
       <origin xyz="0 0.3556 0" rpy="0 0 1.5708" />
       <axis xyz="0 1 0" />
     </joint>

     <link name="CA_04">
       <visual>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-04.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="0 0 0"/>
         <material name="arm_color">
           <color rgba="0.99 0.3 0.3 1"/>
         </material>
       </visual>
       <collision>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-04.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="0 0 0"/>
       </collision>
       <inertial>
         <mass value="0.1" />
         <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
         <inertia ixx = "0.00001" ixy = "0.0" ixz = "0.0"
                  iyy= "0.00001" iyz = "0.0"
                  izz = "0.00001" />
       </inertial>
     </link>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxx 4e Axe xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
     <joint name="axis3" type="revolute">
       <parent link="CA_04"/>
       <child link="CA_05"/>
       <dynamics damping="0.1"/>
       <limit effort="10000.0" lower="-1.57" upper="1.5" velocity="0.57"/>
       <axis xyz="0 0 1" />
       <origin xyz="0.0889 0.047625 0" rpy="-1.5708 0 0" />
       <axis xyz="0 1 0" />
     </joint>

     <link name="CA_05">
       <visual>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-05.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="1.5708 0 0"/>
         <material name="arm_color">
           <color rgba="0.99 0.3 0.3 1"/>
         </material>
       </visual>
       <collision>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-05.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="1.5708 0 0"/>
       </collision>
       <inertial>
         <mass value="0.1" />
         <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
         <inertia ixx = "0.00001" ixy = "0.0" ixz = "0.0"
                  iyy= "0.00001" iyz = "0.0"
                  izz = "0.00001" />
       </inertial>
     </link>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxx 5e Axe xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
     <joint name="axis4" type="revolute">
       <parent link="CA_05"/>
       <child link="CA_06"/>
       <dynamics damping="0.1"/>
       <limit effort="10000.0" lower="-1.57" upper="1.5" velocity="0.57"/>
       <axis xyz="0 0 1" />
       <origin xyz="0 0 0.24765" rpy="1.5708 0 0" />
       <axis xyz="0 1 0" />
     </joint>

     <link name="CA_06">
       <visual>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-06.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="0 0 0"/>
         <material name="arm_color">
           <color rgba="0.99 0.3 0.3 1"/>
         </material>
       </visual>
       <collision>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-06.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="0 0 0"/>
       </collision>
       <inertial>
         <mass value="0.1" />
         <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
         <inertia ixx = "0.00001" ixy = "0.0" ixz = "0.0"
                  iyy= "0.00001" iyz = "0.0"
                  izz = "0.00001" />
       </inertial>
     </link>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxx 6e Axe xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
     <joint name="axis5" type="revolute">
       <parent link="CA_06"/>
       <child link="CA_07"/>
       <dynamics damping="0.1"/>
       <limit effort="10000.0" lower="-1.57" upper="1.5" velocity="0.57"/>
       <axis xyz="0 0 1" />
       <origin xyz="0 0.0762 0" rpy="-1.5708 0 0" />
       <axis xyz="0 1 0" />
     </joint>

     <link name="CA_07">
       <visual>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-07.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="1.5708 0 0"/>
         <material name="arm_color">
           <color rgba="0.99 0.3 0.3 1"/>
         </material>
       </visual>
       <collision>
         <geometry>
           <mesh filename="package://capra_arm_description/meshes/CA-07.stl" scale="1 1 1"/>
         </geometry>
         <origin xyz="0 0 0" rpy="1.5708 0 0"/>
       </collision>
       <inertial>
         <mass value="0.1" />
         <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
         <inertia ixx = "0.00001" ixy = "0.0" ixz = "0.0"
                  iyy= "0.00001" iyz = "0.0"
                  izz = "0.00001" />
       </inertial>
     </link>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxx Gripper xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->

     <joint name="gripper_base" type="fixed">
       <parent link="CA_07"/>
       <child link="robotiq_arg2f_base_link"/>
       <dynamics damping="0.1"/>
       <limit effort="10000.0" lower="-1.57" upper="1.5" velocity="0.57"/>
       <axis xyz="0 0 1" />
       <origin xyz="0 0 0.03" rpy="0 0 0" />
       <axis xyz="0 1 0" />
     </joint>

  <xacro:robotiq_arg2f_140 prefix=""/>

   </xacro:macro>
</robot>
